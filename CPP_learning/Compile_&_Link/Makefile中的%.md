## 问  
/%这是什么东西？  

非常好的问题。
`%` 是 **Makefile 模式匹配（pattern matching）里的“通配符”**，是 Make 里一个非常核心的概念，**比 shell 的 `*` 更智能**。

---

## 🔹1. `%` 是“模式占位符”

在 Makefile 中，`%` 表示任意的、但必须**完整匹配一段字符串**（通常是文件名的一部分）。

### ✅ 举例：

```makefile
$(patsubst src/%.cpp, bin/%, src/main.cpp)
```

这里：

* `src/%.cpp`：模式模板，表示 `src/` 目录下任意一个 `.cpp` 文件。
* `%` 代表“除了目录和后缀之外的部分”。
* 如果匹配到 `src/main.cpp`，那 `%` 的部分就是 `main`。
* 替换模板 `bin/%` → 把 `%` 填进去变成 `bin/main`。

所以最终结果是：

```
bin/main
```

---

## 🔹2. `%` 与 shell 的 `*` 的区别

| 符号  | 用于哪里            | 匹配规则    | 示例                               |
| --- | --------------- | ------- | -------------------------------- |
| `*` | Shell 通配符（bash） | 文件系统匹配  | `ls *.cpp` 匹配所有 `.cpp` 文件        |
| `%` | Make 模式匹配       | 字符串模式替换 | `src/%.cpp` 匹配 `src/main.cpp` 等等 |

区别在于：

* `*` 是文件系统层面的匹配（看实际有没有文件）。
* `%` 是 Make 内部逻辑层面的匹配（字符串替换、目标依赖模式）。

---

## 🔹3. `%` 也可以用于规则里

你在 Makefile 的规则中也能看到类似：

```makefile
$(BIN_DIR)/%: $(SRC_DIR)/%.cpp
	$(CXX) -o $@ $<
```

这表示：

* 任何一个 `.cpp` 文件（比如 `src/main.cpp`）
* 都对应一个目标文件（比如 `bin/main`）
* `$@` 表示目标（`bin/main`），`$<` 表示依赖的源文件（`src/main.cpp`）

Make 就会自动推导出多对文件之间的规则，无需手动写每个编译命令。

---

## 🔹4. 直白一句话总结：

`%` 是“任意中间名”的意思。
在文件匹配中，它表示要**提取公共规律**。

你的这两行：

```makefile
SRCS := $(wildcard $(SRC_DIR)/*.cpp)
TARGETS := $(patsubst $(SRC_DIR)/%.cpp,$(BIN_DIR)/%,$(SRCS))
```

连起来理解就是：

> “找出 src 目录下所有 .cpp 文件，把其中的文件名部分提取出来（%），
> 然后生成同名的 bin 目录下的可执行文件名。”

---

要我给你画一个图，标出 `%` 是怎么把 `src/main.cpp → bin/main` 对应起来的吗？
（我可以直接画出匹配和替换的箭头，让你一眼看明白。）
