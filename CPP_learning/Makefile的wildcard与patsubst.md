## é—®  
SRCS := $(wildcard $(SRC_DIR)/*.cpp)
# æ¯ä¸ª .cpp ç”Ÿæˆå¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶
TARGETS := $(patsubst $(SRC_DIR)/%.cpp,$(BIN_DIR)/%,$(SRCS))
wildcardå’Œpatsubstæ˜¯ä»€ä¹ˆä¸œè¥¿  

è¿™ä¸¤ä¸ªæ˜¯ **GNU Make çš„å†…ç½®å‡½æ•°**ï¼Œåœ¨ Makefile ä¸­éå¸¸å¸¸ç”¨ï¼Œç”¨æ¥åšæ–‡ä»¶åˆ—è¡¨çš„è‡ªåŠ¨åŒ–å¤„ç†ã€‚æˆ‘ä»¬ä¸€æ­¥æ­¥çœ‹æ¸…æ¥šï¼š

---

### ğŸ”¹1. `wildcard` å‡½æ•° â€”â€” è·å–åŒ¹é…çš„æ–‡ä»¶ååˆ—è¡¨

è¯­æ³•ï¼š

```makefile
$(wildcard pattern)
```

**ä½œç”¨ï¼š**
è¿”å›ä¸ `pattern` åŒ¹é…çš„æ‰€æœ‰æ–‡ä»¶åã€‚

ä¾‹å¦‚ï¼š

```makefile
SRC_DIR := src
SRCS := $(wildcard $(SRC_DIR)/*.cpp)
```

æ„æ€æ˜¯ï¼š
å»æ‰¾ `src/` ç›®å½•ä¸‹æ‰€æœ‰ä»¥ `.cpp` ç»“å°¾çš„æ–‡ä»¶ï¼ŒæŠŠè¿™äº›æ–‡ä»¶çš„è·¯å¾„å…¨éƒ¨åˆ—å‡ºæ¥èµ‹å€¼ç»™ `SRCS`ã€‚

ğŸ‘‰ ä¸¾ä¸ªä¾‹å­ï¼š
å¦‚æœä½ çš„ç›®å½•ç»“æ„æ˜¯ï¼š

```
src/
 â”œâ”€â”€ main.cpp
 â”œâ”€â”€ utils.cpp
 â””â”€â”€ test.cpp
```

é‚£ä¹ˆï¼š

```makefile
SRCS := $(wildcard $(SRC_DIR)/*.cpp)
```

å¾—åˆ°çš„ç»“æœæ˜¯ï¼š

```
SRCS = src/main.cpp src/utils.cpp src/test.cpp
```

---

### ğŸ”¹2. `patsubst` å‡½æ•° â€”â€” æ‰¹é‡æ›¿æ¢å­—ç¬¦ä¸²æ¨¡å¼

è¯­æ³•ï¼š

```makefile
$(patsubst pattern,replacement,text)
```

**ä½œç”¨ï¼š**
å¯¹ `text` ä¸­çš„æ¯ä¸ªå•è¯è¿›è¡ŒåŒ¹é…ï¼Œ
å¦‚æœç¬¦åˆ `pattern` æ¨¡å¼ï¼Œå°±ç”¨ `replacement` è§„åˆ™æ›¿æ¢ã€‚

---

ä¾‹å¦‚ä½ çš„è¿™è¡Œï¼š

```makefile
TARGETS := $(patsubst $(SRC_DIR)/%.cpp,$(BIN_DIR)/%,$(SRCS))
```

å«ä¹‰æ‹†è§£ï¼š

* `$(SRC_DIR)/%.cpp`ï¼šåŒ¹é…ç±»ä¼¼ `src/main.cpp`
* `$(BIN_DIR)/%`ï¼šæ›¿æ¢æˆ `bin/main`
* `$(SRCS)`ï¼šæ˜¯ä¸Šä¸€æ­¥åŒ¹é…åˆ°çš„æ–‡ä»¶åˆ—è¡¨ï¼ˆ`src/main.cpp src/utils.cpp src/test.cpp`ï¼‰

ç»“æœå°±æ˜¯ï¼š

```
TARGETS = bin/main bin/utils bin/test
```

---

### ğŸ”¹æ€»ç»“ç›´ç™½è§£é‡Šï¼š

| å‡½æ•°         | ä½œç”¨           | ä¸¾ä¾‹                                                    |
| ---------- | ------------ | ----------------------------------------------------- |
| `wildcard` | è·å–æŸç›®å½•ä¸‹æ‰€æœ‰åŒ¹é…æ–‡ä»¶ | `$(wildcard src/*.cpp)` â†’ `src/a.cpp src/b.cpp`       |
| `patsubst` | æ‰¹é‡å­—ç¬¦ä¸²æ¨¡å¼æ›¿æ¢    | `$(patsubst src/%.cpp,bin/%,$(SRCS))` â†’ `bin/a bin/b` |

---

è¦æ˜¯ä½ æƒ³çœ‹ä¸€çœ¼è¿™ä¸¤ä¸ªå‡½æ•°çš„æ•ˆæœï¼Œå¯ä»¥åŠ ä¸€è¡Œï¼š

```makefile
$(info SRCS=$(SRCS))
$(info TARGETS=$(TARGETS))
```

ç„¶åæ‰§è¡Œ `make`ï¼Œå°±ä¼šåœ¨ç»ˆç«¯æ‰“å°å‡ºå±•å¼€ç»“æœï¼Œéå¸¸ç›´è§‚ã€‚

---

è¦ä¸è¦æˆ‘å¸®ä½ ç”»å‡ºè¿™æ®µ Makefile çš„æ–‡ä»¶æµè½¬å›¾ï¼ˆä» `src/*.cpp` â†’ `bin/*`ï¼‰ï¼Ÿé‚£æ ·ä½ ä¼šæ›´å®¹æ˜“çœ‹æ‡‚æ•´ä¸ªè‡ªåŠ¨ç¼–è¯‘æµç¨‹ã€‚
